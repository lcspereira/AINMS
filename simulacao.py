from core import pycore
import time

def add_to_server(session):
    ''' Add this session to the server's list if this script is executed from
    the core-daemon server.
    '''
    global server
    try:
        server.addsession(session)
        return True
    except NameError:
        return False

session = pycore.Session(persistent=True)
r1 = session.addobj(cls=pycore.nodes.CoreNode, name="r1")
r1.setposition(x=309.0,y=279.0)
r3 = session.addobj(cls = pycore.nodes.CoreNode, name="r3")
r3.setposition(x=480.0,y=372.0)
r5 = session.addobj(cls = pycore.nodes.CoreNode, name="r5")
r5.setposition(x=642.0,y=472.0)
r4 = session.addobj(cls = pycore.nodes.CoreNode, name="r4")
r4.setposition(x=358.0,y=469.0)
r2 = session.addobj(cls = pycore.nodes.CoreNode, name="r2")
r2.setposition(x=645.0,y=270.0)
gw3 = session.addobj(cls = pycore.nodes.CoreNode, name="gw3")
gw3.setposition(x=680.0,y=599.0)
gw2 = session.addobj(cls = pycore.nodes.CoreNode, name="gw2")
gw2.setposition(x=770.0,y=176.0)
gw1 = session.addobj(cls = pycore.nodes.CoreNode, name="gw1")
gw1.setposition(x=187.0,y=190.0)
gw4 = session.addobj(cls = pycore.nodes.CoreNode, name="gw4")
gw4.setposition(x=337.0,y=608.0)
sw4 = session.addobj(cls = pycore.nodes.SwitchNode, name="sw4")
sw4.setposition(x=230.0,y=608.0)
sw1 = session.addobj(cls = pycore.nodes.SwitchNode, name="sw1")
sw1.setposition(x=307.0,y=110.0)
sw2 = session.addobj(cls = pycore.nodes.SwitchNode, name="sw2")
sw2.setposition(x=862.0,y=255.0)
sw3 = session.addobj(cls = pycore.nodes.SwitchNode, name="sw3")
sw3.setposition(x=807.0,y=615.0)
n14 = session.addobj(cls = pycore.nodes.CoreNode, name="n14")
n14.setposition(x=326.0,y=32.0)
n15 = session.addobj(cls = pycore.nodes.CoreNode, name="n15")
n15.setposition(x=534.0,y=102.0)
n16 = session.addobj(cls = pycore.nodes.CoreNode, name="n16")
n16.setposition(x=125.0,y=73.0)
n17 = session.addobj(cls = pycore.nodes.CoreNode, name="n17")
n17.setposition(x=969.0,y=91.0)
n18 = session.addobj(cls = pycore.nodes.CoreNode, name="n18")
n18.setposition(x=802.0,y=400.0)
n19 = session.addobj(cls = pycore.nodes.CoreNode, name="n19")
n19.setposition(x=937.0,y=543.0)
n20 = session.addobj(cls = pycore.nodes.CoreNode, name="n20")
n20.setposition(x=949.0,y=610.0)
n21 = session.addobj(cls = pycore.nodes.CoreNode, name="n21")
n21.setposition(x=225.0,y=531.0)
n22 = session.addobj(cls = pycore.nodes.CoreNode, name="n22")
n22.setposition(x=57.0,y=582.0)
n23 = session.addobj(cls = pycore.nodes.CoreNode, name="n23")
n23.setposition(x=149.0,y=700.0)
n24 = session.addobj(cls = pycore.nodes.CoreNode, name="n24")
n24.setposition(x=434.0,y=194.0)
n25 = session.addobj(cls = pycore.nodes.CoreNode, name="n25")
n25.setposition(x=974.0,y=250.0)
n26 = session.addobj(cls = pycore.nodes.CoreNode, name="n26")
n26.setposition(x=963.0,y=378.0)
n27 = session.addobj(cls = pycore.nodes.CoreNode, name="n27")
n27.setposition(x=733.0,y=304.0)
n28 = session.addobj(cls = pycore.nodes.CoreNode, name="n28")
n28.setposition(x=766.0,y=708.0)
n29 = session.addobj(cls = pycore.nodes.CoreNode, name="n29")
n29.setposition(x=317.0,y=705.0)
r1.newnetif(addrlist=["10.0.0.1/24"], ifindex=0)
r2.newnetif(addrlist=["10.0.0.2/24"], ifindex=0)
r2.newnetif(addrlist=["10.0.1.1/24"], ifindex=1)
r3.newnetif(addrlist=["10.0.1.2/24"], ifindex=0)
r3.newnetif(addrlist=["10.0.2.1/24"], ifindex=1)
r1.newnetif(addrlist=["10.0.2.2/24"], ifindex=1)
r1.newnetif(addrlist=["10.0.3.1/24"], ifindex=2)
r4.newnetif(addrlist=["10.0.3.2/24"], ifindex=0)
r4.newnetif(addrlist=["10.0.4.1/24"], ifindex=1)
r5.newnetif(addrlist=["10.0.4.2/24"], ifindex=0)
r5.newnetif(addrlist=["10.0.5.1/24"], ifindex=1)
r3.newnetif(addrlist=["10.0.5.2/24"], ifindex=2)
r5.newnetif(addrlist=["10.0.6.1/24"], ifindex=2)
r2.newnetif(addrlist=["10.0.6.2/24"], ifindex=2)
r4.newnetif(addrlist=["10.0.7.1/24"], ifindex=2)
r3.newnetif(addrlist=["10.0.7.2/24"], ifindex=3)
r4.newnetif(addrlist=["10.0.8.1/24"], ifindex=3)
gw4.newnetif(addrlist=["10.0.8.2/24"], ifindex=0)
r5.newnetif(addrlist=["10.0.9.1/24"], ifindex=3)
gw3.newnetif(addrlist=["10.0.9.2/24"], ifindex=0)
r2.newnetif(addrlist=["10.0.10.1/24"], ifindex=3)
gw2.newnetif(addrlist=["10.0.10.2/24"], ifindex=0)
r1.newnetif(addrlist=["10.0.11.1/24"], ifindex=3)
gw1.newnetif(addrlist=["10.0.11.2/24"], ifindex=0)
gw1.newnetif(net=sw1, addrlist=["10.0.12.1/24"], ifindex=1)
gw2.newnetif(net=sw2, addrlist=["10.0.13.1/24"], ifindex=1)
gw4.newnetif(net=sw4, addrlist=["10.0.14.1/24"], ifindex=1)
gw3.newnetif(net=sw3, addrlist=["10.0.15.1/24"], ifindex=1)
n29.newnetif(net=sw4, addrlist=["10.0.14.20/24"], ifindex=0)
n23.newnetif(net=sw4, addrlist=["10.0.14.10/24"], ifindex=0)
n22.newnetif(net=sw4, addrlist=["10.0.14.11/24"], ifindex=0)
n21.newnetif(net=sw4, addrlist=["10.0.14.12/24"], ifindex=0)
n28.newnetif(net=sw3, addrlist=["10.0.15.20/24"], ifindex=0)
n19.newnetif(net=sw3, addrlist=["10.0.15.10/24"], ifindex=0)
n20.newnetif(net=sw3, addrlist=["10.0.15.11/24"], ifindex=0)
n27.newnetif(net=sw2, addrlist=["10.0.13.20/24"], ifindex=0)
n18.newnetif(net=sw2, addrlist=["10.0.13.10/24"], ifindex=0)
n26.newnetif(net=sw2, addrlist=["10.0.13.21/24"], ifindex=0)
n25.newnetif(net=sw2, addrlist=["10.0.13.22/24"], ifindex=0)
n17.newnetif(net=sw2, addrlist=["10.0.13.11/24"], ifindex=0)
n16.newnetif(net=sw1, addrlist=["10.0.12.10/24"], ifindex=0)
n14.newnetif(net=sw1, addrlist=["10.0.12.11/24"], ifindex=0)
n15.newnetif(net=sw1, addrlist=["10.0.12.12/24"], ifindex=0)
n24.newnetif(net=sw1, addrlist=["10.0.12.20/24"], ifindex=0)

add_to_server (session)
time.sleep (180)
n14.icmd(["ping", "-c", "5", "10.0.0.2"])
session.shutdown()
#node1.icmd(["ping", "-c", "5", "10.0.0.2"])
#if __name__ == "__main__" or __name__ == "__builtin__":
#    main()
